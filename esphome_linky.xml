<?xml version="1.0" encoding="UTF-8"?>
<component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="racepoint_component_profile.xsd"
    manufacturer="esphome" model="linky" alias="Esphome linky Gateway " device_class="Energy_Resource_monitor"
        minimum_component_engine_version="10.2" rpm_xml_version="1.22">
    
    <notes>
        

        

    </notes>
    <component_properties>
        <always_repeat_input_selection>true</always_repeat_input_selection>
    </component_properties>
    <control_interfaces preferred="ip">
        <ip name_on_component="LAN" response_time_length_ms="1000" port="80" protocol="http" >
       
         <http_header name="Content-Type">application/json</http_header>
         <http_header name="Accept">application/json</http_header>
    
        </ip>
    </control_interfaces>
    <media_interfaces>
        <data name_on_component="Ethernet">
            <combined_media>
                <data_media type="ethernet"></data_media>
                <control port="1880"></control>
            </combined_media>
        </data>
   
   
        <internal name_on_component="Resource Monitor">
            <environmental_media></environmental_media>
            <resource resource_type="ENV_ENERGYRESOURCEMONITOR_SOURCE"/>
        </internal>    
   
   
   
    </media_interfaces>
    <state_variable_list>
        <state_variable name="CurrentEnergyModeName" state_center_binding="CurrentEnergyModeName" owning_logical_component="Monitor" state_center_type="string"></state_variable>
        <state_variable name="CurrentEnergyMode" state_center_binding="CurrentEnergyMode" owning_logical_component="Monitor" state_center_type="integer"></state_variable>
        <state_variable name="GraphType" state_center_binding="GraphType" owning_logical_component="Monitor" state_center_type="string">day</state_variable>
        <state_variable name="GraphSelection" state_center_binding="GraphSelection" owning_logical_component="Monitor" state_center_type="string">Chan1Power</state_variable>
    </state_variable_list>
    <logical_component logical_component_name="Monitor">
        <implementation>
            <internal name_on_component="Resource Monitor"/>
        </implementation>
        

            <status_messages>
                <status_message name="Updates">
                <root_object name="none" format="json" matches_required="at_least_one">
             
                    <values path="/none/value" matches_required="none">
                        <update state="Chan1Power" type="integer"></update>
                    </values>
                    <values path="/none/value" matches_required="none">
                        <update state="Chan2Power" type="integer"></update>
                    </values>
                    <values path="/none/value" matches_required="none">
                        <update state="Chan3Power" type="integer"></update>
                    </values>
                        <values path="/none" matches_required="none">
                        <update state="throwaway2" type="string"></update>
                    </values>
                 </root_object>
           </status_message>
        </status_messages>
        
        <resource_component_actions resource_type="ENV_ENERGYRESOURCEMONITOR_SOURCE">
            <action name="SetGraphTypeDay">
                <update_state_variable name="GraphType" update_type="set" update_source="constant">day</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>
            <action name="SetGraphTypeWeek">
                <update_state_variable name="GraphType" update_type="set" update_source="constant">week</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>
            <action name="SetGraphTypeMonth">
                <update_state_variable name="GraphType" update_type="set" update_source="constant">month</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>
            <action name="SetGraphTypeYear">
                <update_state_variable name="GraphType" update_type="set" update_source="constant">year</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>
            <action name="SetGraphSelection1">
                <update_state_variable name="GraphSelection" update_type="set" update_source="constant">Chan1Power</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>
            <action name="SetGraphSelection2">
                <update_state_variable name="GraphSelection" update_type="set" update_source="constant">Chan2Power</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>
            <action name="SetGraphSelection3">
                <update_state_variable name="GraphSelection" update_type="set" update_source="constant">Chan3Power</update_state_variable>
                <command_interface interface="ip">
                    <command></command>
                </command_interface>
            </action>

            <entity name="Section" address_components="1">
                <screen_representation>
                </screen_representation>    
            </entity>
            <entity name="Channel" address_components="1">
                <screen_representation>
                </screen_representation>    
            </entity>
        </resource_component_actions>
        
        
        
        
        <custom_component_actions>
            <action name="GetTotalPower">
                <command_interface interface="ip">
                    <command response_required="no">
                    <command_string type="character">sensor/puissance</command_string>
                        
                    </command>
                </command_interface>
                <execute_on_schedule period_ms="0"/>
                <execute_on_schedule period_ms="30000"/>
            </action>
        </custom_component_actions>

 </logical_component>
</component>
